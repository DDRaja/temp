p1lg10840.dc01.its.hpecorp.net:scoutap3> dgmgrl /
DGMGRL for Linux: Release 19.0.0.0.0 - Production on Wed Jun 15 04:55:36 2022
Version 19.10.0.0.0

Copyright (c) 1982, 2019, Oracle and/or its affiliates.  All rights reserved.

Welcome to DGMGRL, type "help" for information.
Connected to "scoutap"
Connected as SYSDG.
DGMGRL> show configuration verbose;

Configuration - scoutap_scoutar

  Protection Mode: MaxPerformance
  Members:
  scoutap - Primary database
    scoutaf - Far sync instance
      scoutar - Physical standby database
    scoutar - Physical standby database (alternate of scoutaf)

  Properties:
    FastStartFailoverThreshold      = '30'
    OperationTimeout                = '30'
    TraceLevel                      = 'USER'
    FastStartFailoverLagLimit       = '30'
    CommunicationTimeout            = '180'
    ObserverReconnect               = '0'
    FastStartFailoverAutoReinstate  = 'TRUE'
    FastStartFailoverPmyShutdown    = 'TRUE'
    BystandersFollowRoleChange      = 'ALL'
    ObserverOverride                = 'FALSE'
    ExternalDestination1            = ''
    ExternalDestination2            = ''
    PrimaryLostWriteAction          = 'CONTINUE'
    ConfigurationWideServiceName    = 'scoutap_CFG'

Fast-Start Failover:  Disabled

Configuration Status:
SUCCESS

DGMGRL> show database scoutar;

Database - scoutar

  Role:               PHYSICAL STANDBY
  Intended State:     APPLY-ON
  Transport Lag:      0 seconds (computed 0 seconds ago)
  Apply Lag:          0 seconds (computed 0 seconds ago)
  Average Apply Rate: 77.00 KByte/s
  Real Time Query:    OFF
  Instance(s):
    SCOUTAR1 (apply instance)
    SCOUTAR2
    SCOUTAR3
    SCOUTAR4
    SCOUTAR5
    SCOUTAR6

Database Status:
SUCCESS

DGMGRL> edit database scoutar set state='APPLY-OFF';
Succeeded.
DGMGRL> show database scoutar;

Database - scoutar

  Role:               PHYSICAL STANDBY
  Intended State:     APPLY-OFF
  Transport Lag:      0 seconds (computed 0 seconds ago)
  Apply Lag:          0 seconds (computed 0 seconds ago)
  Average Apply Rate: (unknown)
  Real Time Query:    OFF
  Instance(s):
    SCOUTAR1 (apply instance)
    SCOUTAR2
    SCOUTAR3
    SCOUTAR4
    SCOUTAR5
    SCOUTAR6

Database Status:
SUCCESS

DGMGRL>

============================================DR==============================================

r2lg11376.dc02.its.hpecorp.net:scoutar1> sysdba

SQL*Plus: Release 19.0.0.0.0 - Production on Wed Jun 15 04:58:07 2022
Version 19.10.0.0.0

Copyright (c) 1982, 2020, Oracle.  All rights reserved.


Connected to:
Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.10.0.0.0

SQL> set lines 200 pagesize 0;
SQL> SELECT PROCESS, STATUS, THREAD#, SEQUENCE#, BLOCK#, BLOCKS FROM V$MANAGED_STANDBY ;
ARCH      CLOSING               2       6210      26624       1042
DGRD      ALLOCATED             0          0          0          0
DGRD      ALLOCATED             0          0          0          0
ARCH      CLOSING               3       6775          1        674
ARCH      CLOSING               1       5127      10240       1878
ARCH      CLOSING               2       6345      65536        596

6 rows selected.

SQL> alter database convert to snapshot standby;

Database altered.

SQL> select name, open_mode, db_unique_name, database_role from v$database;
SCOUTAP   MOUNTED              scoutar                        SNAPSHOT STANDBY

SQL> exit
Disconnected from Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.10.0.0.0
r2lg11376.dc02.its.hpecorp.net:scoutar1> srvctl status database -d scoutar
Instance scoutar1 is running on node r2lg11376
Instance scoutar2 is running on node r2lg11377
Instance scoutar3 is running on node r2lg11378
Instance scoutar4 is running on node r2lg11379
Instance scoutar5 is running on node r2lg11380
Instance scoutar6 is running on node r2lg11381

r2lg11376.dc02.its.hpecorp.net:scoutar1>srvctl stop database -d scoutar
r2lg11376.dc02.its.hpecorp.net:scoutar1>srvctl status database -d scoutar

r2lg11376.dc02.its.hpecorp.net:scoutar1> srvctl start database -d scoutar -o open
r2lg11376.dc02.its.hpecorp.net:scoutar1> srvctl status database -d scoutar
Instance scoutar1 is running on node r2lg11376
Instance scoutar2 is running on node r2lg11377
Instance scoutar3 is running on node r2lg11378
Instance scoutar4 is running on node r2lg11379
Instance scoutar5 is running on node r2lg11380
Instance scoutar6 is running on node r2lg11381

r2lg11376.dc02.its.hpecorp.net:scoutar1> sysdba

SQL*Plus: Release 19.0.0.0.0 - Production on Wed Jun 15 05:04:41 2022
Version 19.10.0.0.0

Copyright (c) 1982, 2020, Oracle.  All rights reserved.


Connected to:
Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.10.0.0.0

SQL> select name, open_mode, db_unique_name, database_role from v$database;

NAME      OPEN_MODE            DB_UNIQUE_NAME                 DATABASE_ROLE
--------- -------------------- ------------------------------ ----------------
SCOUTAP   READ WRITE           scoutar                        SNAPSHOT STANDBY


=======================================Primary==============================================



p1lg10838.dc01.its.hpecorp.net:scoutap1> srvctl status database -d scoutap
Instance scoutap1 is running on node p1lg10838
Instance scoutap2 is running on node p1lg10839
Instance scoutap3 is running on node p1lg10840
Instance scoutap4 is not running on node p1lg10841
Instance scoutap5 is not running on node p1lg10842
Instance scoutap6 is not running on node p1lg10843
p1lg10838.dc01.its.hpecorp.net:scoutap1> srvctl config database -d scoutap
Database unique name: scoutap
Database name:
Oracle home: /u01/app/oracle/product/19.0.0/db
Oracle user: oracle
Spfile: +SCOUTAP_DATA/SCOUTAP/PARAMETERFILE/spfile.257.1078869909
Password file: +SCOUTAP_DATA/SCOUTAP/PASSWORD/pwdscoutap.256.1078869887
Domain:
Start options: open
Stop options: immediate
Database role: PRIMARY
Management policy: AUTOMATIC
Server pools:
Disk Groups: SCOUTAP_DATA,SCOUTAP_RECO
Mount point paths:
Services: scoutap_app,scoutap_bulk
Type: RAC
Start concurrency:
Stop concurrency:
OSDBA group: dba
OSOPER group: dba
Database instances: scoutap1,scoutap2,scoutap3,scoutap4,scoutap5,scoutap6
Configured nodes: p1lg10838,p1lg10839,p1lg10840,p1lg10841,p1lg10842,p1lg10843
CSS critical: no
CPU count: 0
Memory target: 0
Maximum memory: 0
Default network number for database services:
Database is administrator managed

p1lg10838.dc01.its.hpecorp.net:scoutap1> srvctl config service -d scoutap
Service name: scoutap_app
Server pool:
Cardinality: 2
Service role: PRIMARY
Management policy: AUTOMATIC
DTP transaction: false
AQ HA notifications: false
Global: false
Commit Outcome: false
Failover type: SELECT
Failover method: BASIC
Failover retries: 100
Failover delay: 5
Failover restore: NONE
Connection Load Balancing Goal: LONG
Runtime Load Balancing Goal: NONE
TAF policy specification: NONE
Edition:
Pluggable database name:
Hub service:
Maximum lag time: ANY
SQL Translation Profile:
Retention: 86400 seconds
Replay Initiation Time: 300 seconds
Drain timeout:
Stop option:
Session State Consistency: DYNAMIC
GSM Flags: 0
Service is enabled
Preferred instances: scoutap2,scoutap3
Available instances: scoutap1,scoutap4,scoutap5,scoutap6
CSS critical: no
Service uses Java: false

Service name: scoutap_bulk
Server pool:
Cardinality: 2
Service role: PRIMARY
Management policy: AUTOMATIC
DTP transaction: false
AQ HA notifications: false
Global: false
Commit Outcome: false
Failover type: SELECT
Failover method: BASIC
Failover retries: 100
Failover delay: 5
Failover restore: NONE
Connection Load Balancing Goal: LONG
Runtime Load Balancing Goal: NONE
TAF policy specification: NONE
Edition:
Pluggable database name:
Hub service:
Maximum lag time: ANY
SQL Translation Profile:
Retention: 86400 seconds
Replay Initiation Time: 300 seconds
Drain timeout:
Stop option:
Session State Consistency: DYNAMIC
GSM Flags: 0
Service is enabled
Preferred instances: scoutap2,scoutap3
Available instances: scoutap1,scoutap4,scoutap5,scoutap6
CSS critical: no
Service uses Java: false

p1lg10838.dc01.its.hpecorp.net:scoutap1> pwd
/SFS/UST/SCOUTAP
p1lg10838.dc01.its.hpecorp.net:scoutap1> sysdba

SQL*Plus: Release 19.0.0.0.0 - Production on Wed Jun 15 05:20:08 2022
Version 19.10.0.0.0

Copyright (c) 1982, 2020, Oracle.  All rights reserved.


Connected to:
Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.10.0.0.0

SQL> show parameter pfile;

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
spfile                               string      +SCOUTAP_DATA/SCOUTAP/PARAMETE
                                                 RFILE/spfile.257.1078869909
SQL> create pfile='/SFS/UST/SCOUTAP/initscoutap.ora' from spfile;

File created.

SQL> create pfile='/SFS/UST/SCOUTAP/initscoutap.ora_org' from spfile;

File created.

p1lg10838.dc01.its.hpecorp.net:scoutap1> pwd
/SFS/UST/SCOUTAP
p1lg10838.dc01.its.hpecorp.net:scoutap1> ls -lrth
total 1.2M
-rwxr-xr-x 1 125066745     6347   94 Apr 18 07:03 backup_database_scoutap.sh
-rwxr-xr-x 1 125066745     6347  305 Apr 18 07:04 backup_scoutap_db.cmd
-rwxr-xr-x 1 125066745     6347   21 Apr 18 07:06 nohup.out
drwxr-xr-x 2 125066745     6347 4.0K Apr 18 07:25 backup
-rwxr-xr-x 1 oracle    oinstall  181 Jun 14 10:57 04_meta_user_scoutap.par
-rw-r----- 1 oracle    dba      552K Jun 14 11:00 all_user_role_scoutap_fmo_prod.dmp
-rw-r----- 1 oracle    dba      1.4K Jun 14 11:00 all_user_role_scoutap_fmo_prod.log
-rwxr-x--- 1 oracle    oinstall  181 Jun 14 11:05 04_meta_user_scoutcp.par
-rw-r----- 1 oracle    dba      556K Jun 14 11:08 all_user_role_scoutcp_fmo_prod.dmp
-rw-r----- 1 oracle    dba      1.4K Jun 14 11:08 all_user_role_scoutcp_fmo_prod.log
-rw-r----- 1 oracle    dba      5.7K Jun 15 05:20 initscoutap.ora
-rw-r----- 1 oracle    dba      5.7K Jun 15 05:21 initscoutap.ora_org


p1lg10838.dc01.its.hpecorp.net:scoutap1> vi initscoutap.ora
p1lg10838.dc01.its.hpecorp.net:scoutap1> grep cluster initscoutap.ora
*.cluster_database=FALSE
p1lg10838.dc01.its.hpecorp.net:scoutap1>

p1lg10838.dc01.its.hpecorp.net:scoutap1> sysdba

SQL*Plus: Release 19.0.0.0.0 - Production on Wed Jun 15 05:24:10 2022
Version 19.10.0.0.0

Copyright (c) 1982, 2020, Oracle.  All rights reserved.


Connected to:
Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.10.0.0.0

SQL> show parameter service;

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
service_names                        string      scoutap,scoutap_DGMGRL,scoutap_app,scoutap_bulk


p1lg10838.dc01.its.hpecorp.net:scoutap1> rman target /

Recovery Manager: Release 19.0.0.0.0 - Production on Wed Jun 15 05:26:34 2022
Version 19.10.0.0.0

Copyright (c) 1982, 2019, Oracle and/or its affiliates.  All rights reserved.

connected to target database: SCOUTAP (DBID=178858791)

p1lg10840.dc01.its.hpecorp.net:scoutap3> cd scoutap
p1lg10840.dc01.its.hpecorp.net:scoutap3> ls -lrth
total 2.1G
-rw-r----- 1 oracle oinstall 2.3M Feb 17 06:54 db_8q0m1st2_14618_1_1.bkp
-rw-r----- 1 oracle oinstall 3.2M Feb 17 06:54 db_8s0m1st2_14620_1_1.bkp
-rw-r----- 1 oracle oinstall 3.1M Feb 17 06:54 db_8r0m1st2_14619_1_1.bkp
-rw-r----- 1 oracle oinstall 359M Feb 17 06:54 db_8p0m1st2_14617_1_1.bkp
-rw-r----- 1 oracle oinstall 1.7G Feb 17 06:54 db_8o0m1st2_14616_1_1.bkp
-rw-r----- 1 oracle oinstall 1.9M Feb 17 06:55 arch_8t0m1svb_14621_1_1.bkp
-rw-r----- 1 oracle oinstall 1.5M Feb 17 06:55 arch_8u0m1svb_14622_1_1.bkp
-rw-r----- 1 oracle oinstall  36M Feb 17 06:56 stby_cntl_8v0m1t1g_14623_1_1.bkp
p1lg10840.dc01.its.hpecorp.net:scoutap3> pwd
/SFS_UST/UST/backup/premig/scoutap
p1lg10840.dc01.its.hpecorp.net:scoutap3> rman target /

Recovery Manager: Release 19.0.0.0.0 - Production on Wed Jun 15 05:37:02 2022
Version 19.10.0.0.0

Copyright (c) 1982, 2019, Oracle and/or its affiliates.  All rights reserved.

connected to target database: SCOUTAP (DBID=178858791)

RMAN> list backup of database summary;

using target database control file instead of recovery catalog

List of Backups
===============
Key     TY LV S Device Type Completion Time      #Pieces #Copies Compressed Tag
------- -- -- - ----------- -------------------- ------- ------- ---------- ---
11207   B  F  A DISK        18-APR-2022 07:09:33 1       1       NO         SCOUTAP_PREMIG_BACKUP
13284   B  F  A DISK        03-MAY-2022 01:00:25 1       1       NO         SCOUTAP_DB_PREMIG
13285   B  F  A DISK        03-MAY-2022 01:00:25 1       1       NO         SCOUTAP_DB_PREMIG
13286   B  F  A DISK        03-MAY-2022 01:00:25 1       1       NO         SCOUTAP_DB_PREMIG
13287   B  F  A DISK        03-MAY-2022 01:00:25 1       1       NO         SCOUTAP_DB_PREMIG
13288   B  F  A DISK        03-MAY-2022 01:00:25 1       1       NO         SCOUTAP_DB_PREMIG
13289   B  F  A DISK        03-MAY-2022 01:00:25 1       1       NO         SCOUTAP_DB_PREMIG
13290   B  F  A DISK        03-MAY-2022 01:00:25 1       1       NO         SCOUTAP_DB_PREMIG
13291   B  F  A DISK        03-MAY-2022 01:00:25 1       1       NO         SCOUTAP_DB_PREMIG
13292   B  F  A DISK        03-MAY-2022 01:00:29 1       1       NO         SCOUTAP_DB_PREMIG
13293   B  F  A DISK        03-MAY-2022 01:00:52 1       1       NO         SCOUTAP_DB_PREMIG

RMAN> exit

p1lg10840.dc01.its.hpecorp.net:scoutap3> srvctl status database -d scoutap
Instance scoutap1 is running on node p1lg10838
Instance scoutap2 is running on node p1lg10839
Instance scoutap3 is running on node p1lg10840
Instance scoutap4 is not running on node p1lg10841
Instance scoutap5 is not running on node p1lg10842
Instance scoutap6 is not running on node p1lg10843

p1lg10840.dc01.its.hpecorp.net:scoutap3> srvctl stop database -d scoutap
p1lg10840.dc01.its.hpecorp.net:scoutap3> srvctl status database -d scoutap
Instance scoutap1 is not running on node p1lg10838
Instance scoutap2 is not running on node p1lg10839
Instance scoutap3 is not running on node p1lg10840
Instance scoutap4 is not running on node p1lg10841
Instance scoutap5 is not running on node p1lg10842
Instance scoutap6 is not running on node p1lg10843

p1lg10840.dc01.its.hpecorp.net:scoutap3> sqlplus / as sysdba

SQL*Plus: Release 19.0.0.0.0 - Production on Wed Jun 15 05:50:03 2022
Version 19.10.0.0.0

Copyright (c) 1982, 2020, Oracle.  All rights reserved.

Connected to an idle instance.

SQL> startup mount exclusive restrict pfile='/SFS/UST/SCOUTAP/initscoutap.ora';
ORACLE instance started.

Total System Global Area 2.1475E+10 bytes
Fixed Size                 23063624 bytes
Variable Size            1.1610E+10 bytes
Database Buffers         9797894144 bytes
Redo Buffers               44044288 bytes
Database mounted.
SQL> show parameter cluster;

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
cdb_cluster                          boolean     FALSE
cdb_cluster_name                     string
cluster_database                     boolean     FALSE
cluster_database_instances           integer     1
cluster_interconnects                string
SQL> show parameter control;

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
control_file_record_keep_time        integer     45
control_files                        string      +SCOUTAP_DATA/SCOUTAP/CONTROLF
                                                 ILE/current.258.1078869927, +S
                                                 COUTAP_RECO/SCOUTAP/CONTROLFIL
                                                 E/current.256.1078869929
control_management_pack_access       string      DIAGNOSTIC+TUNING



SQL> !env | grep ORA
ORACLE_BASE=/u01/app/oracle
ORACLE_HOME=/u01/app/oracle/product/19.0.0/db
ORACLE_SID=scoutap3
ORA_NLS11=/u01/app/oracle/product/19.0.0/db/nls/data

SQL> select name, dbid, open_mode, database_role from v$database;

NAME            DBID OPEN_MODE            DATABASE_ROLE
--------- ---------- -------------------- ----------------
SCOUTAP    178858791 MOUNTED              PRIMARY


SQL> drop database;

Database dropped.

Disconnected from Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.10.0.0.0
SQL> exit

ASMCMD> cd SCOUTAP_DATA/
ASMCMD> ls -lrth
Type  Redund  Striped  Time  Sys  Name
                             Y    SCOUTAP/
ASMCMD> cd SCOUTAP
ASMCMD> ls -lrth
Type  Redund  Striped  Time  Sys  Name
                             Y    PARAMETERFILE/
                             Y    PASSWORD/
ASMCMD> pwd
+SCOUTAP_DATA/SCOUTAP

p1lg10840.dc01.its.hpecorp.net:scoutap3> cd scoutap
p1lg10840.dc01.its.hpecorp.net:scoutap3> ls -lrth
total 2.1G
-rw-r----- 1 oracle oinstall 2.3M Feb 17 06:54 db_8q0m1st2_14618_1_1.bkp
-rw-r----- 1 oracle oinstall 3.2M Feb 17 06:54 db_8s0m1st2_14620_1_1.bkp
-rw-r----- 1 oracle oinstall 3.1M Feb 17 06:54 db_8r0m1st2_14619_1_1.bkp
-rw-r----- 1 oracle oinstall 359M Feb 17 06:54 db_8p0m1st2_14617_1_1.bkp
-rw-r----- 1 oracle oinstall 1.7G Feb 17 06:54 db_8o0m1st2_14616_1_1.bkp
-rw-r----- 1 oracle oinstall 1.9M Feb 17 06:55 arch_8t0m1svb_14621_1_1.bkp
-rw-r----- 1 oracle oinstall 1.5M Feb 17 06:55 arch_8u0m1svb_14622_1_1.bkp
-rw-r----- 1 oracle oinstall  36M Feb 17 06:56 stby_cntl_8v0m1t1g_14623_1_1.bkp
p1lg10840.dc01.its.hpecorp.net:scoutap3> pwd
/SFS_UST/UST/backup/premig/scoutap


p1lg10840.dc01.its.hpecorp.net:scoutap3> sqlplus / as sysdba

SQL*Plus: Release 19.0.0.0.0 - Production on Wed Jun 15 05:59:16 2022
Version 19.10.0.0.0

Copyright (c) 1982, 2020, Oracle.  All rights reserved.

Connected to an idle instance.

SQL> startup nomount pfile='/SFS/UST/SCOUTAP/initscoutap.ora';
ORACLE instance started.

Total System Global Area 2.1475E+10 bytes
Fixed Size                 23063624 bytes
Variable Size            1.1610E+10 bytes
Database Buffers         9797894144 bytes
Redo Buffers               44044288 bytes
SQL> show parameter cluster;

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
cdb_cluster                          boolean     FALSE
cdb_cluster_name                     string
cluster_database                     boolean     FALSE
cluster_database_instances           integer     1
cluster_interconnects                string


p1lg10840.dc01.its.hpecorp.net:scoutap3> rman target /

Recovery Manager: Release 19.0.0.0.0 - Production on Wed Jun 15 06:00:55 2022
Version 19.10.0.0.0

Copyright (c) 1982, 2019, Oracle and/or its affiliates.  All rights reserved.

connected to target database: SCOUTAP (not mounted)

RMAN> restore controlfile from '/SFS_UST/UST/backup/premig/scoutap/stby_cntl_8v0m1t1g_14623_1_1.bkp';

Starting restore at 15-JUN-2022 06:01:35
using target database control file instead of recovery catalog
allocated channel: ORA_DISK_1
channel ORA_DISK_1: SID=1043 device type=DISK

channel ORA_DISK_1: restoring control file
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
output file name=+SCOUTAP_DATA/SCOUTAP/CONTROLFILE/current.258.1107410497
output file name=+SCOUTAP_RECO/SCOUTAP/CONTROLFILE/current.256.1107410499
Finished restore at 15-JUN-2022 06:01:39


RMAN> sql 'alter database mount';

sql statement: alter database mount
released channel: ORA_DISK_1


list backup of database summary;  (check backup are listed) 

p1lg10840.dc01.its.hpecorp.net:scoutap3> rman target /

Recovery Manager: Release 19.0.0.0.0 - Production on Wed Jun 15 06:05:39 2022
Version 19.10.0.0.0

Copyright (c) 1982, 2019, Oracle and/or its affiliates.  All rights reserved.

connected to target database: SCOUTAP (DBID=178858791, not open)

rman_scoutap_res.cmd

run {
allocate channel CH1 type disk;
allocate channel CH2 type disk;
allocate channel CH3 type disk;
allocate channel CH4 type disk;
allocate channel CH5 type disk;
allocate channel CH6 type disk;
allocate channel CH7 type disk;
allocate channel CH8 type disk;
allocate channel CH9 type disk;
allocate channel CH10 type disk;
allocate channel CH11 type disk;
allocate channel CH12 type disk;
allocate channel CH13 type disk;
allocate channel CH14 type disk;
allocate channel CH15 type disk;
allocate channel CH16 type disk;
restore database;
recover database;
release channel CH16;
release channel CH15;
release channel CH14;
release channel CH13;
release channel CH12;
release channel CH11;
release channel CH10;
release channel CH9 ;
release channel CH8 ;
release channel CH7 ;
release channel CH6 ;
release channel CH5 ;
release channel CH4 ;
release channel CH3 ;
release channel CH2 ;
release channel CH1 ;
}

check control file is correct or not.

p1lg10840.dc01.its.hpecorp.net:scoutap3> sqlplus / as sysdba

SQL*Plus: Release 19.0.0.0.0 - Production on Wed Jun 15 06:08:13 2022
Version 19.10.0.0.0

Copyright (c) 1982, 2020, Oracle.  All rights reserved.


Connected to:
Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.10.0.0.0

SQL> show parameter control;

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
control_file_record_keep_time        integer     45
control_files                        string      +SCOUTAP_DATA/SCOUTAP/CONTROLFILE/current.258.1107410497, +S
                                                 COUTAP_RECO/SCOUTAP/CONTROLFILE/current.256.1107410499
control_management_pack_access       string      DIAGNOSTIC+TUNING


 
p1lg10840.dc01.its.hpecorp.net:scoutap3> rman target /

Recovery Manager: Release 19.0.0.0.0 - Production on Wed Jun 15 11:47:00 2022
Version 19.10.0.0.0

Copyright (c) 1982, 2019, Oracle and/or its affiliates.  All rights reserved.

connected to target database: SCOUTAP (DBID=178858791, not open)

RMAN> catalog start with '/SFS_UST/UST/backup/premig/scoutap/';

using target database control file instead of recovery catalog
searching for all files that match the pattern /SFS_UST/UST/backup/premig/scoutap/

List of Files Unknown to the Database
=====================================
File Name: /SFS_UST/UST/backup/premig/scoutap/db_8q0m1st2_14618_1_1.bkp
File Name: /SFS_UST/UST/backup/premig/scoutap/db_8s0m1st2_14620_1_1.bkp
File Name: /SFS_UST/UST/backup/premig/scoutap/db_8r0m1st2_14619_1_1.bkp
File Name: /SFS_UST/UST/backup/premig/scoutap/db_8p0m1st2_14617_1_1.bkp
File Name: /SFS_UST/UST/backup/premig/scoutap/db_8o0m1st2_14616_1_1.bkp
File Name: /SFS_UST/UST/backup/premig/scoutap/arch_8t0m1svb_14621_1_1.bkp
File Name: /SFS_UST/UST/backup/premig/scoutap/arch_8u0m1svb_14622_1_1.bkp
File Name: /SFS_UST/UST/backup/premig/scoutap/stby_cntl_8v0m1t1g_14623_1_1.bkp

Do you really want to catalog the above files (enter YES or NO)? YES
cataloging files...
cataloging done

List of Cataloged Files
=======================
File Name: /SFS_UST/UST/backup/premig/scoutap/db_8q0m1st2_14618_1_1.bkp
File Name: /SFS_UST/UST/backup/premig/scoutap/db_8s0m1st2_14620_1_1.bkp
File Name: /SFS_UST/UST/backup/premig/scoutap/db_8r0m1st2_14619_1_1.bkp
File Name: /SFS_UST/UST/backup/premig/scoutap/db_8p0m1st2_14617_1_1.bkp
File Name: /SFS_UST/UST/backup/premig/scoutap/db_8o0m1st2_14616_1_1.bkp
File Name: /SFS_UST/UST/backup/premig/scoutap/arch_8t0m1svb_14621_1_1.bkp
File Name: /SFS_UST/UST/backup/premig/scoutap/arch_8u0m1svb_14622_1_1.bkp
File Name: /SFS_UST/UST/backup/premig/scoutap/stby_cntl_8v0m1t1g_14623_1_1.bkp

RMAN> exit


Recovery Manager complete.
p1lg10840.dc01.its.hpecorp.net:scoutap3> rman target /

Recovery Manager: Release 19.0.0.0.0 - Production on Wed Jun 15 11:47:52 2022
Version 19.10.0.0.0

Copyright (c) 1982, 2019, Oracle and/or its affiliates.  All rights reserved.

connected to target database: SCOUTAP (DBID=178858791, not open)

RMAN>

 
p1lg10840.dc01.its.hpecorp.net:scoutap3> env | grep ORA
ORACLE_BASE=/u01/app/oracle
ORACLE_HOME=/u01/app/oracle/product/19.0.0/db
ORACLE_SID=scoutap3
ORA_NLS11=/u01/app/oracle/product/19.0.0/db/nls/data
p1lg10840.dc01.its.hpecorp.net:scoutap3> nohup rman target / cmdfile=rman_scoutap_res.cmd > rvcr_scoutap.out &
[1]     78620
p1lg10840.dc01.its.hpecorp.net:scoutap3> nohup: ignoring input and redirecting stderr to stdout

p1lg10840.dc01.its.hpecorp.net:scoutap3> ls -lrt



p1lg10840.dc01.its.hpecorp.net:scoutap3> vi rvcr_scoutap.out
p1lg10840.dc01.its.hpecorp.net:scoutap3> sqlplus / as sysdba

SQL*Plus: Release 19.0.0.0.0 - Production on Wed Jun 15 11:57:09 2022
Version 19.10.0.0.0

Copyright (c) 1982, 2020, Oracle.  All rights reserved.


Connected to:
Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.10.0.0.0

SQL> set lines 200 pagesize 0;
SQL> select name, open_mode from v$database;
SCOUTAP   MOUNTED

SQL> select name, open_mode, dbid, database_role from v$database;
SCOUTAP   MOUNTED               178858791 PRIMARY

SQL> alter database open;
alter database open
*
ERROR at line 1:
ORA-19751: could not create the change tracking file
ORA-19750: change tracking file: '+SCOUTAP_RECO/SCOUTAP/CHANGETRACKING/ctf.271.1078870737'
ORA-17502: ksfdcre:4 Failed to create file +SCOUTAP_RECO/SCOUTAP/CHANGETRACKING/ctf.271.1078870737
ORA-15046: ASM file name '+SCOUTAP_RECO/SCOUTAP/CHANGETRACKING/ctf.271.1078870737' is not in single-file creation form
ORA-17503: ksfdopn:2 Failed to open file +SCOUTAP_RECO/SCOUTAP/CHANGETRACKING/ctf.271.1078870737
ORA-15012: ASM file '+SCOUTAP_RECO/SCOUTAP/CHANGETRACKING/ctf.271.1078870737' does not exist


SQL> alter database open;
alter database open
*
ERROR at line 1:
ORA-19751: could not create the change tracking file
ORA-19750: change tracking file: '+SCOUTAP_RECO/SCOUTAP/CHANGETRACKING/ctf.271.1078870737'
ORA-17502: ksfdcre:4 Failed to create file +SCOUTAP_RECO/SCOUTAP/CHANGETRACKING/ctf.271.1078870737
ORA-15046: ASM file name '+SCOUTAP_RECO/SCOUTAP/CHANGETRACKING/ctf.271.1078870737' is not in single-file creation form
ORA-17503: ksfdopn:2 Failed to open file +SCOUTAP_RECO/SCOUTAP/CHANGETRACKING/ctf.271.1078870737
ORA-15012: ASM file '+SCOUTAP_RECO/SCOUTAP/CHANGETRACKING/ctf.271.1078870737' does not exist


SQL> alter database disable block change tracking;

Database altered.

SQL> alter database enable BLOCK CHANGE TRACKING using file '+SCOUTAP_RECO';

Database altered.

SQL> alter database open;
alter database open
*
ERROR at line 1:
ORA-01589: must use RESETLOGS or NORESETLOGS option for database open


SQL> alter database open resetlogs;

Database altered.

SQL> select name, open_mode, dbid, database_role from v$database;
SCOUTAP   READ WRITE            178858791 PRIMARY

SQL> show parameter control;
control_file_record_keep_time        integer     45
control_files                        string      +SCOUTAP_DATA/SCOUTAP/CONTROLF
                                                 ILE/current.258.1107410497, +S
                                                 COUTAP_RECO/SCOUTAP/CONTROLFIL
                                                 E/current.256.1107410499
control_management_pack_access       string      DIAGNOSTIC+TUNING
SQL> show parameter pfile;
spfile                               string



Modifying orginal pfile 

*.control_files='+SCOUTAP_DATA/SCOUTAP/CONTROLFILE/current.258.1107410497','+SCOUTAP_RECO/SCOUTAP/CONTROLFILE/current.256.1107410499'#Oracle managed file




output file name=+SCOUTAP_DATA/SCOUTAP/CONTROLFILE/current.258.1107410497
output file name=+SCOUTAP_RECO/SCOUTAP/CONTROLFILE/current.256.1107410499


p1lg10840.dc01.its.hpecorp.net:scoutap3> asmcmd
ASMCMD> cd +SCOUTAP_DATA/SCOUTAP/
ASMCMD> ls -lrth
Type  Redund  Striped  Time  Sys  Name
                             Y    CONTROLFILE/
                             Y    DATAFILE/
                             Y    ONLINELOG/
                             Y    PARAMETERFILE/
                             Y    PASSWORD/
                             Y    TEMPFILE/
ASMCMD> cd PARAMETERFILE/
ASMCMD> ls -lrth
Type           Redund  Striped  Time             Sys  Name
PARAMETERFILE  UNPROT  COARSE   JUN 15 05:00:00  Y    spfile.257.1078869909


SQL> show parameter pfile;

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
spfile                               string
SQL>
SQL>
SQL> create spfile='+SCOUTAP_DATA' from pfile='/SFS/UST/SCOUTAP/initscoutap_org.ora';

File created.


ASMCMD> cd +SCOUTAP_DATA/SCOUTAP/
ASMCMD> ls -lrth
Type  Redund  Striped  Time  Sys  Name
                             Y    CONTROLFILE/
                             Y    DATAFILE/
                             Y    ONLINELOG/
                             Y    PARAMETERFILE/
                             Y    PASSWORD/
                             Y    TEMPFILE/
ASMCMD> cd PARAMETERFILE/
ASMCMD> ls -lrt
Type           Redund  Striped  Time             Sys  Name
PARAMETERFILE  UNPROT  COARSE   JUN 15 05:00:00  Y    spfile.257.1078869909
PARAMETERFILE  UNPROT  COARSE   JUN 15 12:00:00  Y    spfile.279.1107432727

p1lg10840.dc01.its.hpecorp.net:scoutap3> sqlplus / as sysdba

SQL*Plus: Release 19.0.0.0.0 - Production on Wed Jun 15 12:19:45 2022
Version 19.10.0.0.0

Copyright (c) 1982, 2020, Oracle.  All rights reserved.


Connected to:
Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.10.0.0.0

SQL> select name from v$database;

NAME
---------
SCOUTAP

SQL> show parameter service;

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
service_names                        string      scoutap,scoutap_DGMGRL,scoutap
                                                 _app,scoutap_bulk
SQL> shu immediate;
Database closed.
Database dismounted.
ORACLE instance shut down.
SQL> exit
Disconnected from Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.10.0.0.0
p1lg10840.dc01.its.hpecorp.net:scoutap3> srvctl status database -d scoutap
Instance scoutap1 is not running on node p1lg10838
Instance scoutap2 is not running on node p1lg10839
Instance scoutap3 is not running on node p1lg10840
Instance scoutap4 is not running on node p1lg10841
Instance scoutap5 is not running on node p1lg10842
Instance scoutap6 is not running on node p1lg10843
p1lg10840.dc01.its.hpecorp.net:scoutap3> srvctl start service -d scoutap
p1lg10840.dc01.its.hpecorp.net:scoutap3> srvctl status database -d scoutap
Instance scoutap1 is not running on node p1lg10838
Instance scoutap2 is running on node p1lg10839
Instance scoutap3 is running on node p1lg10840
Instance scoutap4 is not running on node p1lg10841
Instance scoutap5 is not running on node p1lg10842
Instance scoutap6 is not running on node p1lg10843
p1lg10840.dc01.its.hpecorp.net:scoutap3> srvctl status service -d scoutap
Service scoutap_app is running on instance(s) scoutap2,scoutap3
Service scoutap_bulk is running on instance(s) scoutap2,scoutap3


sqlplus sys/scoutcp_mig@scoutcp_dgmgrl as sysdba
sqlplus sys/scoutcp_mig@scoutcr_dgmgrl as sysdba
















